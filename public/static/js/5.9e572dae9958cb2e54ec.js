webpackJsonp([5],{AVUG:function(t,s){},HyJv:function(t,s,o){"use strict";Object.defineProperty(s,"__esModule",{value:!0});var i=o("Dd8w"),a=o.n(i),n=o("GQaK"),e=o("NYxO"),c={props:{food:Object},data:function(){return{isShow:!1}},methods:{toggleShow:function(){this.isShow=!this.isShow}}},l={render:function(){var t=this,s=t.$createElement,o=t._self._c||s;return o("transition",{attrs:{name:"fade"}},[t.isShow?o("div",{staticClass:"food"},[o("div",{staticClass:"food-content"},[o("div",{staticClass:"image-header"},[o("img",{directives:[{name:"lazy",rawName:"v-lazy",value:t.food.image,expression:"food.image"}]}),t._v(" "),o("p",{staticClass:"foodpanel-desc"},[t._v(t._s(t.food.info))]),t._v(" "),o("div",{staticClass:"back",on:{click:t.toggleShow}},[o("i",{staticClass:"iconfont icon-arrow_left"})])]),t._v(" "),o("div",{staticClass:"content"},[o("h1",{staticClass:"title"},[t._v(t._s(t.food.name))]),t._v(" "),o("div",{staticClass:"detail"},[o("span",{staticClass:"sell-count"},[t._v("月售"+t._s(t.food.sellCount)+"份")]),t._v(" "),o("span",{staticClass:"rating"},[t._v("好评率"+t._s(t.food.rating)+"%")])]),t._v(" "),o("div",{staticClass:"price"},[o("span",{staticClass:"now"},[t._v("￥"+t._s(t.food.price))]),t._v(" "),o("span",{directives:[{name:"show",rawName:"v-show",value:t.food.oldPrice,expression:"food.oldPrice"}],staticClass:"old"},[t._v("￥"+t._s(t.food.oldPrice))])]),t._v(" "),o("div",{staticClass:"cartcontrol-wrapper"},[o("CartControl",{attrs:{food:t.food}})],1)])]),t._v(" "),o("div",{staticClass:"food-cover",on:{click:t.toggleShow}})]):t._e()])},staticRenderFns:[]};var r=o("VU/8")(c,l,!1,function(t){o("AVUG")},"data-v-540aff38",null).exports,d={data:function(){return{isShow:!1}},methods:{toggleShow:function(){this.isShow=!this.isShow},clearCart:function(){this.$store.dispatch("clearCart")}},computed:a()({},Object(e.c)(["cartFoods","info"]),Object(e.b)(["totalCount","totalPrice"]),{payClass:function(){return this.totalPrice<this.info.minPrice?"not-enough":"enough"},payText:function(){var t=this.totalPrice,s=this.info.minPrice;return 0===t?"￥"+s+"元起送":t<s?"还差￥"+(s-t)+"元起送":"去结算"},listShow:function(){var t=this;return 0===this.totalCount?(this.isShow=!1,!1):(this.isShow&&this.$nextTick(function(){t.scroll?t.scroll.refresh():t.scroll=new n.a(".list-content",{click:!0})}),this.isShow)}})},v={render:function(){var t=this,s=t.$createElement,o=t._self._c||s;return o("div",[o("div",{staticClass:"shopcart"},[o("div",{staticClass:"content"},[o("div",{staticClass:"content-left",on:{click:t.toggleShow}},[o("div",{staticClass:"logo-wrapper"},[o("div",{staticClass:"logo",class:{highlight:t.totalCount}},[o("i",{staticClass:"iconfont icon-shopping_cart",class:{highlight:t.totalCount}})]),t._v(" "),o("div",{staticClass:"num"},[t._v(t._s(t.totalCount))])]),t._v(" "),o("div",{staticClass:"price",class:{highlight:t.totalCount}},[t._v("￥"+t._s(t.totalPrice))]),t._v(" "),o("div",{staticClass:"desc"},[t._v("另需配送费￥"+t._s(t.info.deliveryPrice)+"元")])]),t._v(" "),o("div",{staticClass:"content-right"},[o("div",{staticClass:"pay",class:t.payClass},[t._v("\n         "+t._s(t.payText)+"\n        ")])])]),t._v(" "),o("div",{directives:[{name:"show",rawName:"v-show",value:t.listShow,expression:"listShow"}],staticClass:"shopcart-list"},[o("div",{staticClass:"list-header"},[o("h1",{staticClass:"title"},[t._v("购物车")]),t._v(" "),o("span",{staticClass:"empty",on:{click:t.clearCart}},[t._v("清空")])]),t._v(" "),o("div",{staticClass:"list-content"},[o("ul",t._l(t.cartFoods,function(s,i){return o("li",{key:i,staticClass:"food"},[o("span",{staticClass:"name"},[t._v(t._s(s.name))]),t._v(" "),o("div",{staticClass:"price"},[o("span",[t._v("￥"+t._s(s.price))])]),t._v(" "),o("div",{staticClass:"cartcontrol-wrapper"},[o("CartControl",{attrs:{food:s}})],1)])}))])])]),t._v(" "),o("transition",{attrs:{name:"fade"}},[o("div",{directives:[{name:"show",rawName:"v-show",value:t.listShow,expression:"listShow"}],staticClass:"list-mask",on:{click:t.toggleShow}})])],1)},staticRenderFns:[]};var h=o("VU/8")(d,v,!1,function(t){o("zPuP")},"data-v-656d36fa",null).exports,f={data:function(){return{scrollY:0,tops:[],food:{}}},computed:a()({},Object(e.c)(["goods"]),{currentIndex:function(){var t=this.scrollY,s=this.tops,o=s.findIndex(function(o,i){return t>=o&&t<s[i+1]});return this.index!=o&&(this.index=o,this.leftScroll&&this.leftScroll.scrollToElement(this.$refs.typesUl.children[o],200)),o}}),mounted:function(){var t=this;this.$store.dispatch("getShopGoods",function(){t.$nextTick(function(){t._initScroll(),t._initTops()})})},components:{Food:r,ShopCart:h},methods:{_initScroll:function(){var t=this;this.leftScroll=new n.a(".menu-wrapper",{click:!0}),this.rightScroll=new n.a(".foods-wrapper",{click:!0,probeType:1}),this.rightScroll.on("scroll",function(s){s.x;var o=s.y;t.scrollY=Math.abs(o)}),this.rightScroll.on("scrollEnd",function(s){s.x;var o=s.y;t.scrollY=Math.abs(o)})},_initTops:function(){var t=[],s=0;t.push(s),this.$refs.foodsUl.querySelectorAll(".food-list-hook").forEach(function(o){s+=o.clientHeight,t.push(s)}),this.tops=t},selectItem:function(t){var s=-this.tops[t];this.scrollY=-s,this.rightScroll.scrollTo(0,s,300)},showFood:function(t){this.food=t,this.$refs.food.toggleShow()}}},u={render:function(){var t=this,s=t.$createElement,o=t._self._c||s;return o("div",[o("div",{staticClass:"goods"},[o("div",{staticClass:"menu-wrapper"},[o("ul",{ref:"typesUl"},t._l(t.goods,function(s,i){return o("li",{key:i,staticClass:"menu-item",class:{current:i===t.currentIndex},on:{click:function(s){t.selectItem(i)}}},[o("span",{staticClass:"text bottom-border-1px"},[s.icon?o("img",{staticClass:"icon",attrs:{src:s.icon}}):t._e(),t._v("\r\n            "+t._s(s.name)+"\r\n          ")])])}))]),t._v(" "),o("div",{staticClass:"foods-wrapper"},[o("ul",{ref:"foodsUl"},t._l(t.goods,function(s,i){return o("li",{key:i,staticClass:"food-list-hook"},[o("h1",{staticClass:"title"},[t._v(t._s(s.name))]),t._v(" "),o("ul",t._l(s.foods,function(s,i){return o("li",{key:i,staticClass:"food-item bottom-border-1px",on:{click:function(o){t.showFood(s)}}},[o("div",{staticClass:"icon"},[o("img",{attrs:{width:"57",height:"57",src:s.icon}})]),t._v(" "),o("div",{staticClass:"content"},[o("h2",{staticClass:"name"},[t._v(t._s(s.name))]),t._v(" "),o("p",{staticClass:"desc"},[t._v(t._s(s.description))]),t._v(" "),o("div",{staticClass:"extra"},[o("span",{staticClass:"count"},[t._v("月售"+t._s(s.sellCount)+"份")]),t._v(" "),o("span",[t._v("好评率"+t._s(s.rating)+"%")])]),t._v(" "),o("div",{staticClass:"price"},[o("span",{staticClass:"now"},[t._v("￥"+t._s(s.price))]),t._v(" "),s.oldPrice?o("span",{staticClass:"old"},[t._v("￥"+t._s(s.oldPrice))]):t._e()]),t._v(" "),o("div",{staticClass:"cartcontrol-wrapper"},[o("CartControl",{attrs:{food:s}})],1)])])}))])}))]),t._v(" "),o("ShopCart")],1),t._v(" "),o("Food",{ref:"food",attrs:{food:t.food}})],1)},staticRenderFns:[]};var _=o("VU/8")(f,u,!1,function(t){o("IZWE")},"data-v-5184dc79",null);s.default=_.exports},IZWE:function(t,s){},zPuP:function(t,s){}});
//# sourceMappingURL=5.9e572dae9958cb2e54ec.js.map